groups:
  - name: node-health
    rules:
      - alert: ValidatorNodeDown
        expr: up{job="validator"} == 0
        for: 2m
        labels:
          severity: critical
        annotations:
          summary: Validator node is down
          description: Prometheus has not scraped the validator metrics endpoint for more than 2 minutes.

      - alert: RpcNodeDown
        expr: up{job="rpc"} == 0
        for: 2m
        labels:
          severity: critical
        annotations:
          summary: RPC node is down
          description: Prometheus has not scraped the RPC node metrics endpoint for more than 2 minutes.

      - alert: BootnodeDown
        expr: up{job="bootnode"} == 0
        for: 5m
        labels:
          severity: warning
        annotations:
          summary: Bootnode is not reachable
          description: Prometheus has not scraped the bootnode metrics endpoint for more than 5 minutes.

      - alert: HighMemoryUsage
        expr: (node_memory_MemTotal_bytes - node_memory_MemAvailable_bytes) / node_memory_MemTotal_bytes > 0.85
        for: 10m
        labels:
          severity: warning
        annotations:
          summary: High memory usage detected
          description: Memory utilization on {{ $labels.instance }} has exceeded 85% for over 10 minutes.

      - alert: LowDiskSpace
        expr: (node_filesystem_size_bytes{fstype!~"tmpfs|overlay"} - node_filesystem_free_bytes{fstype!~"tmpfs|overlay"}) / node_filesystem_size_bytes{fstype!~"tmpfs|overlay"} > 0.85
        for: 15m
        labels:
          severity: warning
        annotations:
          summary: Disk utilization critical
          description: Disk usage on {{ $labels.instance }} has exceeded 85% for over 15 minutes.
